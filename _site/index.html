<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>bloGu - Home</title>
      <meta name="viewport" content="width=device-width">

      <!-- syntax highlighting CSS -->
      <link rel="stylesheet" href="/css/syntax.css">

      <!-- Responsive CSS -->
      <link rel="stylesheet" href="/css/responsive.css">

      <!-- Custom CSS -->
      <link rel="stylesheet" href="/css/main.css">

    

      <!-- Google Fonts -->
      <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700' rel='stylesheet' type='text/css'>
      <link href='http://fonts.googleapis.com/css?family=Raleway:300,400,700' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <div class="site">
      <div class="sidebar" id="sidebar">
        <div class="header">
          <h1 class="title"><a href="/">
              bloGu
          </a></h1>
          <span class="tagline">
            the official
            <br>JGu blog
          </span>
        </div>
        <div class="posts">
          <ul class="posts-list">
            
              <li class="post-link">
                <a class="post-title" href="/d3/wikipedia/love/languages/2015/08/27/wikipedia-love.html">
                  <span class="post-date">27 Aug 2015</span>
                  Wikipedia Love
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/d3/wikipedia/most/2015/08/25/the-most.html">
                  <span class="post-date">25 Aug 2015</span>
                  The Most
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/d3/nuclear/bombs/2015/08/23/bombs-away.html">
                  <span class="post-date">23 Aug 2015</span>
                  Bombs Away
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/ruby/for/good/minaswan/washington/dc/2015/08/03/ruby-for-good.html">
                  <span class="post-date">03 Aug 2015</span>
                  Ruby for Good and DC
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/vim/autocomplete/neocomplete/ultisnips/vimsnippets/snippets/productivity/2015/08/03/the-vim-autocomplete-trifecta.html">
                  <span class="post-date">03 Aug 2015</span>
                  The Vim autocomplete trifecta
                </a>
              </li>
            
          </ul>
        </div>
        <div class="footer">
          <span id="footer-links">
            <a href="" class="footer-link">About</a> <span class="separator">&bull;</span>
            <a href="" class="footer-link">Twitter</a> <span class="separator">&bull;</span>
            <a href="" class="footer-link">GitHub</a>
          </span>
        </div>
      </div>

        

<div class="content" id="home">
  <div id="sidebar-button">
    <img src="/images/sidebar-button.png">
  </div>
  <div id="post-info">

    

    
      <div id="love" style="height: 500px; width: 750px"></div>
    

    
      
        <script src='/scripts/d3.min.js' type="text/javascript"></script>
      
        <script src='/scripts/d3-tip.js' type="text/javascript"></script>
      
        <script src='/scripts/rawwikis.js' type="text/javascript"></script>
      
        <script src='/scripts/love.js' type="text/javascript"></script>
      
    

    <div id="info-container">
      <h1 id="title">Wikipedia Love</h1>
      <span id="date">27 Aug 2015</span>
    </div>
  </div>

  <div class="post">
    <p>Who loves Wikipedia? Of course, I do. But I wanted to see roughly which language’s Wiki had the most love, proportionally to the number of speakers. Of course, there are a number of metrics to go by, <a href="https://meta.wikimedia.org/wiki/List_of_Wikipedias#Notes">depth or number of active users</a> being notable, but, for simplicity, I used the raw number of articles. I ended up choosing a <em>Nationalencyklopedin</em>–a Swedish encyclopedia–dataset for native language usage numbers, due to its fullness of language statistics, available on <a href="https://en.wikipedia.org/wiki/List_of_languages_by_number_of_native_speakers#Nationalencyklopedin">this page</a>. I then used <a href="https://en.wikipedia.org/wiki/List_of_languages_by_total_number_of_speakers#Ethnologue_.282013.2C_17th_edition.29">Ethnologue</a> numbers for English, French, German, Spanish, Persian, Mandarin, and Russian because the difference between total and native speakers was rather great. I believe even these rough statistics provide a telling story. The color intensity shows how a language proportionally compared to its peers in terms of number of articles divided by number of speakers. <a href="https://war.wikipedia.org/wiki/Syahan_nga_Pakli">Waray-Waray</a>, <a href="https://sv.wikipedia.org/wiki/Portal:Huvudsida">Swedish</a>, and <a href="https://nl.wikipedia.org/wiki/Hoofdpagina">Dutch</a> contributors come out on top. Do their contributors simply more often translate articles from English? Or do they draw from the other languages in their geographic vicinity? Only they know. At the bottom are <a href="https://zh.wikipedia.org/wiki/Wikipedia:%E9%A6%96%E9%A1%B5">Mandarin</a> and <a href="https://ar.wikipedia.org/wiki/%D8%A7%D9%84%D8%B5%D9%81%D8%AD%D8%A9_%D8%A7%D9%84%D8%B1%D8%A6%D9%8A%D8%B3%D9%8A%D8%A9">Arabic</a>. The cynic in me cites the fact that the majority of native speakers of these languages live in countries with heavy censorship, but this is only a wild hypothesis.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">pack</span> <span class="o">=</span> <span class="nx">rawWikis</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">diameter</span> <span class="o">=</span> <span class="mi">500</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">svg</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;#love&#39;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;svg&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">,</span> <span class="nx">diameter</span><span class="p">)</span>
<span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="nx">diameter</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">bubble</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">layout</span><span class="p">.</span><span class="nx">pack</span><span class="p">()</span>
<span class="p">.</span><span class="nx">size</span><span class="p">([</span><span class="nx">diameter</span><span class="p">,</span> <span class="nx">diameter</span><span class="p">])</span>
<span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">articles</span><span class="p">;</span> <span class="p">})</span>
<span class="c1">// .sort(function(a, b) {</span>
<span class="c1">// 	return -(a.value - b.value)</span>
<span class="c1">// })</span>
<span class="p">.</span><span class="nx">padding</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">tip</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">tip</span><span class="p">()</span>
<span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;d3-tip&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">offset</span><span class="p">([</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">[</span>
    <span class="s2">&quot;&lt;p&gt;&quot;</span><span class="p">,</span>
    <span class="nx">d</span><span class="p">.</span><span class="nx">englishname</span><span class="p">,</span>
    <span class="s2">&quot; (&quot;</span><span class="p">,</span>
    <span class="nx">d</span><span class="p">.</span><span class="nx">nativename</span><span class="p">,</span>
    <span class="s2">&quot;)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;&lt;/br&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Articles: &quot;</span><span class="p">,</span>
    <span class="nx">numberWithCommas</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">articles</span><span class="p">),</span>
    <span class="s2">&quot;&lt;/br&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Speakers: &quot;</span><span class="p">,</span>
    <span class="nx">numberWithCommas</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">speakers</span><span class="p">),</span>
    <span class="s2">&quot;&lt;/br&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Quotient: &quot;</span><span class="p">,</span>
    <span class="nx">d3</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">articledivspeakers</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span>
    <span class="s2">&quot;&lt;/br&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Wiki Symbol: &quot;</span><span class="p">,</span>
    <span class="nx">d</span><span class="p">.</span><span class="nx">wiki</span><span class="p">,</span>
    <span class="s2">&quot;&lt;/p&gt;&quot;</span><span class="p">,</span>
  <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">svg</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">tip</span><span class="p">);</span>

<span class="c1">// generate data with calculated layout values</span>
<span class="kd">var</span> <span class="nx">nodes</span> <span class="o">=</span> <span class="nx">bubble</span><span class="p">.</span><span class="nx">nodes</span><span class="p">(</span><span class="nx">pack</span><span class="p">)</span>
<span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="nx">d</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span> <span class="p">});</span> <span class="c1">// filter out the outer bubble</span>

<span class="kd">var</span> <span class="nx">values</span> <span class="o">=</span> <span class="nx">pack</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">articledivspeakers</span><span class="p">;</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">max</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">values</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">fillColor</span> <span class="o">=</span> <span class="s2">&quot;#008100&quot;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">secondFillColor</span> <span class="o">=</span> <span class="s2">&quot;#bcffbc&quot;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">fill</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">()</span>
<span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="nx">max</span><span class="p">])</span>
<span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="nx">secondFillColor</span><span class="p">,</span> <span class="nx">fillColor</span><span class="p">]);</span>

<span class="kd">var</span> <span class="nx">vis</span> <span class="o">=</span> <span class="nx">svg</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">nodes</span><span class="p">);</span>

<span class="nx">vis</span><span class="p">.</span><span class="nx">enter</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;circle&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;transform&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="s1">&#39;translate(&#39;</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span> <span class="p">})</span>
<span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;fill&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">fill</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">articledivspeakers</span><span class="p">);</span> <span class="p">})</span>
<span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">r</span><span class="p">;</span> <span class="p">})</span>
<span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mouseover&#39;</span><span class="p">,</span> <span class="nx">tip</span><span class="p">.</span><span class="nx">show</span><span class="p">)</span>
<span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mouseout&#39;</span><span class="p">,</span> <span class="nx">tip</span><span class="p">.</span><span class="nx">hide</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">numberWithCommas</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\B(?=(\d{3})+(?!\d))/g</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>


  </div>
  <div class="colophon">
    <p>
      <span id="pub-date">Published on 27 Aug 2015</span> <span class="separator">&bull;</span>
      <span id="social">Find me on <a href="">Twitter</a>!</span>
    </p>
  </div>
</div>



    </div>
    <script src="/scripts/responsive.js" type="text/javascript"></script>
  </body>
</html>
